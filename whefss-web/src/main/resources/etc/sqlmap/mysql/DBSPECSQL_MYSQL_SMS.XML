<?xml version="1.0" encoding="GB2312"?>
<MYSQL>
    <dynSentence name="UPD_SMSTBSM_JRNNO">   <!--更新待处理记录-->
         <sentence>           
            UPDATE SMSTBSM
               SET PRO_JRN_NO = ?, SND_FLG = '1'
             WHERE SND_FLG = '0'
               AND EFF_FLG = '1'
               AND MO_STR_DT &lt;= ?
               AND MO_END_DT &gt;= ?
               AND MO_STR_TM &lt;= ?
               AND MO_END_TM &gt;= ?
               LIMIT 0,?
         </sentence>
         <fields>GWA.JRN_NO|GWA.TX_DT|GWA.TX_DT|GWA.TX_TM|GWA.TX_TM|MAX_FLX|</fields>
      </dynSentence>
      
       <dynSentence name="UPD_SMSTGSM_JRNNO">   <!--更新待处理记录-->
         <sentence>
            UPDATE SMSTGSM SET PRO_JRN_NO=?,SND_FLG='1' WHERE SND_FLG='0' AND EFF_FLG='1' AND VFY_STS='1' AND DLT_STS='1' LIMIT 0,? 
         </sentence>
         <fields>GWA.JRN_NO|MAX_FLX|</fields>
      </dynSentence>
   
      <dynSentence name="QRY_SMSTSMMO">
  	<sentence>
		SELECT  * FROM SMSTSMMO WHERE MBL_NO='%s'  ORDER BY TM_SMP DESC LIMIT 0,1
	  </sentence>
	  <fields>MBL_NO|</fields>
	</dynSentence>

      <dynSentence name="QRY_SMSTTMPS_SMTMP_0">  <!--查询短信模版及相关参数-->
         <sentence>
         SELECT A.SM_TYP,A.PRV_CD,A.SMS_CLS,A.SMS_MO,A.SMS_TMP,A.REP_FLD,A.ID_KEY,A.PSW_FLG,C.SRC_NO,B.*
            FROM SMSTTMPS A,SMSTPARM B,SMSTNOIF C
           WHERE A.SMS_CD=?
             AND (A.PRV_CD=? )
             AND (? BETWEEN concat(A.EFF_DT,A.EFF_TM) AND concat(A.EXP_DT,A.EXP_TM))
             AND A.EFF_FLG='1'
             AND A.ID_KEY=C.ID_KEY
             AND A.SM_TYP=B.SM_TYP
             AND A.EFF_FLG=C.EFF_FLG
         </sentence>
         <fields>SYS_DATETIME|SMS_CD|PRV_CD|</fields>
      </dynSentence>		
</MYSQL>
